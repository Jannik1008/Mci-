<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator Layout 1</title>
    <style>
        .calculator {
            display: grid;
            grid-template-columns: repeat(14, auto); /* 14 Spalten für alle Buttons */
            gap: 5px;
            max-width: 900px; /* Breite des gesamten Containers, um Platz für die Buttons zu schaffen */
            margin: auto; /* Zentrierung des Containers */
            margin-left: 10px;

        }
        .calculator button {
            width: 80px; /* Breite für die Zahlenbuttons beibehalten */
            height: 80px;
            font-size: 24px;
            cursor: pointer;
        }
        .display {
            grid-column: span 14; /* Spannweite über alle 14 Spalten */
            height: 80px;
            text-align: right;
            padding-right: 10px;
            font-size: 36px;
            background-color: #f2f2f2;
            border: 1px solid #ccc;
        }
        .problem {
            grid-column: span 14; /* Spannweite über alle 14 Spalten */
            height: 40px;
            text-align: center;
            padding-right: 10px;
            font-size: 24px;
            background-color: #e0e0e0;
            border: 1px solid #ccc;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
<div class="calculator">
    <div class="problem" id="problem"></div>
    <div class="display" id="display">0</div>
    <button onclick="inputDigit('0')">0</button>
    <button onclick="inputDigit('1')">1</button>
    <button onclick="inputDigit('2')">2</button>
    <button onclick="inputDigit('3')">3</button>
    <button onclick="inputDigit('4')">4</button>
    <button onclick="inputDigit('5')">5</button>
    <button onclick="inputDigit('6')">6</button>
    <button onclick="inputDigit('7')">7</button>
    <button onclick="inputDigit('8')">8</button>
    <button onclick="inputDigit('9')">9</button>
    <button onclick="inputDigit('.')">.</button>
    <button onclick="handleOperator('*')">*</button>
    <button onclick="calculateResult()">=</button>
</div>
<script>
    let displayValue = '0';
    let firstOperand = null;
    let waitingForSecondOperand = false;
    let operator = null;

    function inputDigit(digit) {
        const display = document.getElementById('display');

        if (waitingForSecondOperand === true) {
            displayValue = digit;
            waitingForSecondOperand = false;
        } else {
            displayValue = displayValue === '0' || displayValue === String(firstOperand) ? digit : displayValue + digit;
        }

        display.innerText = displayValue;
    }

    function handleOperator(nextOperator) {
        const inputValue = parseFloat(displayValue);

        if (operator && waitingForSecondOperand) {
            operator = nextOperator;
            return;
        }

        if (firstOperand == null && !isNaN(inputValue)) {
            firstOperand = inputValue;
        } else if (operator) {
            const result = calculate(firstOperand, inputValue, operator);
            displayValue = `${parseFloat(result.toFixed(7))}`;
            firstOperand = result;
        }

        waitingForSecondOperand = true;
        operator = nextOperator;
    }

    function calculate(first, second, operator) {
        if (operator === '*') {
            return first * second;
        }
        return second;
    }

    function calculateResult() {
        if (operator && waitingForSecondOperand === false) {
            const inputValue = parseFloat(displayValue);
            const result = calculate(firstOperand, inputValue, operator);
            displayValue = `${parseFloat(result.toFixed(7))}`;
            firstOperand = null;
            operator = null;
            waitingForSecondOperand = false;
            document.getElementById('display').innerText = displayValue;

            // Neue Aufgabe generieren
            generateProblem();
        }
    }

    function getRandomNumber() {
        return (Math.random() * 9).toFixed(2);
    }

    function generateProblem() {
        displayValue = '0'; // Reset displayValue
        const num1 = getRandomNumber();
        const num2 = getRandomNumber();
        const problem = `${num1} * ${num2}`;
        document.getElementById('problem').innerText = problem;
        return problem;
    }

    window.onload = function() {
        generateProblem();
    };
</script>
</body>
</html>